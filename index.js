!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.index=t(require("react")):e.index=t(e.React)}(this,(__WEBPACK_EXTERNAL_MODULE__359__=>(()=>{"use strict";var __webpack_modules__={356:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function __WEBPACK_DEFAULT_EXPORT__({data,outputs,inputs,onError}){inputs.from(((val,relOutpus)=>{var _a;const script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){let fn,returnVal,isOk;try{eval(`fn = ${script}`),returnVal=fn(val),isOk=!0}catch(e){console.error(e),onError(`数据转换错误:${e.message}`,e)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__})},359:e=>{e.exports=__WEBPACK_EXTERNAL_MODULE__359__}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>d,getCom:()=>m});const e=JSON.parse('{"title":"Fn计算","namespace":"mybricks.core-comlib.fn","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"Fn计算","icon":"./icon.png","runtime":"./Fn.tsx","rtType":"js","visibility":false}'),t=JSON.parse('{"visibility":false,"title":"变量","namespace":"mybricks.core-comlib.var","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"变量","icon":"./icon.png","data":"./data.json","runtime":"./Var.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"get","title":"读取","schema":{"type":"any"},"rels":["return"]},{"id":"set","title":"赋值","schema":{"type":"follow"},"rels":["return"]},{"id":"reset","title":"重置","schema":{"type":"any"}}],"outputs":[{"id":"return","title":"完成","schema":{"type":"unknown"}},{"id":"changed","title":"当值发生变化","schema":{"type":"unknown"}}]}');function r(e){if(e&&"object"==typeof e)try{return e instanceof FormData?e:JSON.parse(JSON.stringify(e))}catch(t){return e}return e}const n=JSON.parse('{"title":"类型转换","visibility":false,"namespace":"mybricks.core-comlib.type-change","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"类型转换","icon":"./icon.png","runtime":"./rt.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"from","title":"从","schema":{"type":"follow"},"rels":["to"]}],"outputs":[{"id":"to","title":"到","schema":{"type":"follow"},"conMax":1,"editable":true}]}');var i=__webpack_require__(356);const o=JSON.parse('{"deprecated":true,"visibility":false,"title":"连接器","namespace":"mybricks.core-comlib.connector","author":"MyBricks","author_name":"MyBricks","version":"1.0.0","description":"连接器","runtime":"./runtime.ts","editors":"./editors.tsx","icon":"./icon.svg","rtType":"js-autorun","inputs":[{"id":"call","rels":["then","catch"],"title":"调用","schema":{"type":"object"}}],"outputs":[{"id":"then","title":"结果","schema":{"type":"unknown"}},{"id":"catch","title":"发生错误","schema":{"type":"string"}}]}');function s({env:e,data:t,outputs:r,onError:n},i={}){if(t.connector)try{e.callConnector(t.connector,i,t.connectorConfig).then((e=>{r.then(e)})).catch((e=>{r.catch(e)}))}catch(e){console.error(e),r.catch(`执行错误 ${e.message||e}`)}else r.catch("没有选择接口")}const c=JSON.parse('{"visibility":false,"title":"作用域输入","namespace":"mybricks.core-comlib.frame-input","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"作用域输入","rtType":"js","runtime":"./runtime.ts","editors":"./editor.tsx","inputs":[{"id":"getCurValue","title":"获取","schema":{"type":"any"},"rels":["return"]}],"outputs":[{"id":"return","title":"结果","schema":{"type":"follow"}}]}'),a=JSON.parse('{"visibility":false,"title":"打开对话框","namespace":"mybricks.core-comlib.scenes","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"切换场景","icon":"./icon.png","runtime":"./runtime.ts","data":"./data.json","rtType":"js","inputs":[{"id":"open","title":"打开","schema":{"type":"any"}}]}'),u=JSON.parse('{"title":"模块","namespace":"mybricks.core-comlib.module","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"模块","icon":"./icon.png","data":"./data.json","runtime":"./runtime.tsx","editors":"./editors.ts"}');var _=__webpack_require__(359);const p=JSON.parse('{"title":"组","namespace":"mybricks.core-comlib.group","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"组","runtime":"./runtime.tsx","editors":"./editors.ts","slots":[{"title":"内容","id":"content","layout":"smart"}],"outputs":[{"id":"click","title":"单击","schema":{"type":"number"}},{"id":"dblClick","title":"双击","schema":{"type":"number"}}]}'),l={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[f({comDef:e,rt:function({inputs:e,outputs:t}){}}),f({comDef:t,rt:function({env:e,data:t,outputs:n,inputs:i,_notifyBindings:o}){i.get(((e,n)=>{const i=r(void 0!==t.val?t.val:t.initValue);n.return(i)})),i.set(((e,i)=>{t.val=e;const s=r(e);n.changed(s,!0),o(s),i.return(s)})),i.reset((()=>{const e=t.initValue;t.val=e;const i=r(e);n.changed(i,!0),o(i)}))}}),f({comDef:n,rt:i.Z}),f({comDef:o,rt:function({env:e,data:t,inputs:r,outputs:n,onError:i}){e.runtime&&(t.immediate?s({env:e,data:t,outputs:n}):r.call((r=>{s({env:e,data:t,outputs:n,onError:i},r)})))}}),f({comDef:c,rt:function({env:e,inputs:t}){e.runtime&&t.getCurValue(((e,t)=>{t.return(e)}))}}),f({comDef:a,rt:function({env:e,data:t,inputs:r,_inputs:n,_inputsCallable:i}){r.open((r=>{e.canvas.open(t._sceneId,r,"popup"===t._sceneShowType?null:t.openType),i._open(r)}))}}),f({comDef:u,rt:function({env:e,data:t,inputs:r,outputs:n}){const[i,o]=(0,_.useState)(),s=(0,_.useMemo)((()=>{const i=e.getModuleJSON(t.definedId);return e.renderModule(i,{ref(s){if(o(s),e.runtime){const{inputs:e,outputs:o}=i,c=t.configs;for(let e in c)s.inputs[e](c[e]);e.forEach((({id:e})=>{r[e]((t=>{s.inputs[e](t)}))})),o.forEach((({id:e})=>{s.outputs(e,n[e])}))}s.run()},disableAutoRun:!0})}),[]);return(0,_.useMemo)((()=>{if(i&&e.edit){const e=t.configs;for(let t in e)i.inputs[t](e[t])}}),[t.configs,i]),s}}),f({comDef:p,rt:function({slots:e,outputs:t}){const r=(0,_.useCallback)((()=>{t.click()}),[]),n=(0,_.useCallback)((()=>{t.dblClick()}),[]);return React.createElement("div",{style:{width:"100%",height:"100%",overflow:"visible"},onClick:r,onDoubleClick:n},e.content.render())}})]},d=l;function m(e){return l.comAray.find((t=>t.namespace===e))}function f({comDef:e,rt:t,data:r}){return Object.assign(e,{runtime:t,data:r})}})(),__webpack_exports__})()));