!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["mybricks.core-comlib"]=t():e["mybricks.core-comlib"]=t()}(this,(()=>(()=>{"use strict";var __webpack_modules__={821:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function __WEBPACK_DEFAULT_EXPORT__(_a){var data=_a.data,outputs=_a.outputs,inputs=_a.inputs,onError=_a.onError;inputs.from((function(val,relOutpus){var _a,script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){var fn=void 0,returnVal=void 0,isOk=void 0;try{eval("fn = ".concat(script)),returnVal=fn(val),isOk=!0}catch(e){console.error(e),onError("数据转换错误:".concat(e.message),e)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>_,getCom:()=>s});const e=JSON.parse('{"title":"Fn计算","namespace":"mybricks.core-comlib.fn","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"Fn计算","icon":"./icon.png","runtime":"./Fn.tsx","rtType":"js","visibility":false}'),t=JSON.parse('{"visibility":false,"title":"变量","namespace":"mybricks.core-comlib.var","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"变量","icon":"./icon.png","runtime":"./Var.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"get","title":"读取","schema":{"type":"any"},"rels":["return"]},{"id":"set","title":"赋值","schema":{"type":"follow"}}],"outputs":[{"id":"return","title":"完成","schema":{"type":"unknown"}},{"id":"changed","title":"当值发生变化","schema":{"type":"unknown"}}]}');function r(e){if(e&&"object"==typeof e)try{return JSON.parse(JSON.stringify(e))}catch(t){return e}return e}const o=JSON.parse('{"title":"类型转换","namespace":"mybricks.core-comlib.type-change","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"类型转换","icon":"./icon.png","runtime":"./rt.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"from","title":"从","schema":{"type":"follow"},"rels":["to"]}],"outputs":[{"id":"to","title":"到","schema":{"type":"follow"},"conMax":1,"editable":true}]}');var n=__webpack_require__(821);const c=JSON.parse('{"title":"连接器","namespace":"mybricks.core-comlib.connector","author":"MyBricks","author_name":"MyBricks","version":"1.0.0","description":"连接器","runtime":"./runtime.ts","editors":"./editors.tsx","icon":"./icon.svg","rtType":"js-autorun","inputs":[{"id":"call","rels":["then","catch"],"title":"调用","schema":{"type":"object"}}],"outputs":[{"id":"then","title":"结果","schema":{"type":"unknown"}},{"id":"catch","title":"发生错误","schema":{"type":"string"}}]}');function i(e,t){var r=e.env,o=e.data,n=e.outputs;if(e.onError,void 0===t&&(t={}),o.connector)try{r.callConnector(o.connector,t,o.connectorConfig).then((function(e){n.then(e)})).catch((function(e){n.catch(e)}))}catch(e){console.error(e),n.catch("执行错误 ".concat(e.message||e))}else n.catch("没有选择接口")}var a={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[u({comDef:e,rt:function(e){e.inputs,e.outputs}}),u({comDef:t,rt:function(e){e.env;var t=e.data,o=e.outputs,n=e.inputs;n.get((function(e,o){var n=r(t.val);o.return(n)})),n.set((function(e){t.val=e,o.changed(r(e),!0)}))}}),u({comDef:o,rt:n.Z}),u({comDef:c,rt:function(e){var t=e.env,r=e.data,o=e.inputs,n=e.outputs,c=e.onError;t.runtime&&(r.immediate?i({env:t,data:r,outputs:n}):o.call((function(e){i({env:t,data:r,outputs:n,onError:c},e)})))}})]};const _=a;function s(e){return a.comAray.find((function(t){return t.namespace===e}))}function u(e){var t=e.comDef,r=e.rt,o=e.data;return Object.assign(t,{runtime:r,data:o})}})(),__webpack_exports__})()));