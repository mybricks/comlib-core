!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.index=e(require("react")):t.index=e(t.React)}(this,(function(__WEBPACK_EXTERNAL_MODULE__359__){return function(){"use strict";var __webpack_modules__={356:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function __WEBPACK_DEFAULT_EXPORT__(_a){var data=_a.data,outputs=_a.outputs,inputs=_a.inputs,onError=_a.onError;inputs.from((function(val,relOutpus){var _a,script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){var fn=void 0,returnVal=void 0,isOk=void 0;try{eval("fn = ".concat(script)),returnVal=fn(val),isOk=!0}catch(t){console.error(t),onError("数据转换错误:".concat(t.message),t)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__webpack_require__.d(__webpack_exports__,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}})},359:function(t){t.exports=__WEBPACK_EXTERNAL_MODULE__359__}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=function(t,e){for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};return function(){function t(e,n){void 0===n&&(n=[]);try{var r=Object.prototype.toString.call(e);if(null===e||"object"!=typeof e||r.startsWith("[object HTML")||"[object FormData]"===r)return e;var o=n.filter((function(t){return t.original===e}))[0];if(o)return o.copy;var i=Array.isArray(e)?[]:{};return n.push({original:e,copy:i}),Object.keys(e).forEach((function(r){i[r]=t(e[r],n)})),i}catch(t){return e}}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return x}});var e=__webpack_require__(356);function n(t,e){var n=t.env,r=t.data,o=t.outputs;if(t.onError,void 0===e&&(e={}),r.connector)try{n.callConnector(r.connector,e,r.connectorConfig).then((function(t){o.then(t)})).catch((function(t){o.catch(t)}))}catch(t){console.error(t),o.catch("执行错误 ".concat(t.message||t))}else o.catch("没有选择接口")}var r=__webpack_require__(359),o=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},i=window.setInterval,u=window.clearInterval,a=window.setTimeout,c=window.clearTimeout,s=window,p=new WeakMap,l=new WeakMap,f=new WeakMap,d={undefined:!0,Array:!0,Object:!0,String:!0,Boolean:!0,Math:!0,Number:!0,Symbol:!0,parseFloat:!0,Float32Array:!0};function _(t){for(;t.trim().endsWith(";");)t=t.slice(0,t.length-1);return t}function v(){var t={};return Object.getOwnPropertyNames(s).forEach((function(e){var n=Object.getOwnPropertyDescriptor(s,e);if(n&&!n.configurable){var r=Object.prototype.hasOwnProperty.call(n,"get");"top"!==e&&"parent"!==e&&"self"!==e&&"window"!==e||(n.configurable=!0,r||(n.writable=!0)),Object.defineProperty(t,e,Object.freeze(n))}})),t}var h=function(){function t(t){void 0===t&&(t={});var e=this;this.hasDisposed=!1,this.fakeWindow=v(),this.timeoutList=[],this.intervalList=[],this.options={},this.options=t||{},this.proxy=new Proxy(window,{set:function(t,n,r){if(!e.hasDisposed)try{!e.fakeWindow.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(o=n,i=e.fakeWindow,(u=Object.getOwnPropertyDescriptor(window,o))&&u.writable&&Object.defineProperty(i,o,{configurable:u.configurable,enumerable:u.enumerable,writable:u.writable,value:u.value})),e.fakeWindow[n]=r}catch(t){throw console.error("set-key-error",n,t),t}var o,i,u;return!0},get:function(t,n){if(n===Symbol.unscopables)return d;if("window"===n||"self"===n)return e.proxy;if("document"!==n){if("hasOwnProperty"===n)return t.hasOwnProperty;if("eval"===n)return t.eval;if("location"===n)return t.location;try{var r=n in e.fakeWindow?e.fakeWindow[n]:t[n];return"function"!=typeof r||function(t){if(l.has(t))return l.get(t);var e=0===t.name.indexOf("bound ")&&!t.hasOwnProperty("prototype");return l.set(t,e),e}(r)||function(t){if(p.has(t))return p.get(t);var e=t.prototype&&t.prototype.constructor===t&&Object.getOwnPropertyNames(t.prototype).length>1||/^function\b\s[A-Z].*/.test(t.toString())||/^class\b/.test(t.toString());return p.set(t,e),e}(r)?r:(r=Function.prototype.bind.call(r,t),function(t,e){var n=f.get(e);if(n)return n;var r=Function.prototype.bind.call(e,t);for(var o in e)r[o]=e[o];return e.hasOwnProperty("prototype")&&!r.hasOwnProperty("prototype")&&(r.prototype=e.prototype),f.set(e,r),r}(window,r))}catch(t){throw console.error("get-key-error",n,t),t}}},has:function(t,n){return!e.options.module||"params"!==n&&"cb"!==n}}),this.proxy.setTimeout=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e.hasDisposed)return 0;var u=a.apply(void 0,o([t,n],r,!1));return e.timeoutList.push(u),u},this.proxy.clearTimeout=function(t){var n=e.timeoutList.indexOf(t);return-1!==n&&e.timeoutList.splice(n,1),c(t)},this.proxy.setInterval=function(t,n){for(var r=[],u=2;u<arguments.length;u++)r[u-2]=arguments[u];if(e.hasDisposed)return 0;var a=i.apply(void 0,o([t,n],r,!1));return e.intervalList.push(a),a},this.proxy.clearInterval=function(t){var n=e.intervalList.indexOf(t);return-1!==n&&e.intervalList.splice(n,1),u(t)},s.proxy=this.proxy}return t.prototype.compile=function(t){if(this.hasDisposed)throw new Error("sandbox has been destroyed");var e,n=this.options.module;e=n?function(t){return t=_(t),"(\n                function(window, params, cb) {\n                    with(window) {\n                        return (".concat(t,")(...params, cb)\n                    }\n                }\n            )")}(t):function(t){return t=_(t),"(\n                function(window) {\n                    with(window){\n                        ".concat(t,"\n                    } \n                }\n            ).bind(window.proxy)\n        ")}(t);var r=s.eval("".concat(e,";//@ sourceURL=sandbox-code.js"));return{run:function(t,e){try{return n?r(window.proxy,t,e):r(window.proxy)}catch(t){throw console.error("js sandbox error occur:",t),t}}}},t.prototype.dispose=function(){this.timeoutList.forEach((function(t){window.clearTimeout(t)})),this.timeoutList=[],this.intervalList.forEach((function(t){return u(t)})),this.intervalList=[],this.fakeWindow=v(),this.options={},delete s.proxy,this.hasDisposed=!0},t}(),m=h,b=function(t){try{return decodeURIComponent(t)}catch(e){return t}},y=function(t){try{return encodeURIComponent(t)}catch(e){return t}};function w(t,e,n){var r,o,i=n||{},u=i.callback,a=void 0===u?function(){}:u,c=i.env,s=void 0===c?{}:c;if(!(null==s?void 0:s.toCode)&&!s.extractFns||!Number.isInteger(t)){var p,l;if("object"==typeof t&&null!==t&&(t=null!==(o=null==t?void 0:t.transformCode)&&void 0!==o?o:null==t?void 0:t.code),(null==t?void 0:t.includes("var%20_RTFN_"))||(t=g(t)),e&&e.length){l=new m({module:!0});var f=b(t);p=/export\s+default.*async.*function.*\(/g.test(f)?l.compile("".concat(f.replace(/export\s+default.*function.*\(/g,"async function _RT_("))):l.compile("".concat(f.replace(/export\s+default.*function.*\(/g,"function _RT_(")))}else p=(l=new m).compile("".concat(b(t)));return p.run(e,a),l}(r=s.extractFns)[t].apply(r,e)}var g=function(t){t=b(t);try{if(!window.Babel)throw Error("Babel was not found in window");var e=window.Babel.transform("_RTFN_ = ".concat(t," "),{presets:["env","typescript"],parserOpts:{strictMode:!1},comments:!1,filename:"types.d.ts"}).code;return e="(function() { var _RTFN_; \n".concat(e,"\n return _RTFN_; })()"),y(e)}catch(e){return console.error(e),y(t)}};function k(t){var e=[];return Object.keys(t).sort((function(t,e){var n,r;return+((null===(n=null==t?void 0:t.match(/\d+/g))||void 0===n?void 0:n[0])||0)-+((null===(r=null==e?void 0:e.match(/\d+/g))||void 0===r?void 0:r[0])||0)})).forEach((function(n){e.push(t[n])})),e}var O=function(){return O=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},O.apply(this,arguments)},x={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[{namespace:"mybricks.core-comlib.fn",version:"1.0.0",runtime:function(t){t.inputs,t.outputs},data:{},inputs:[],outputs:[]},{namespace:"mybricks.core-comlib.var",version:"1.0.0",runtime:function(e){e.env;var n=e.data,r=e.outputs,o=e.inputs,i=e._notifyBindings;o.get((function(e,r){var o=t(void 0!==n.val?n.val:n.initValue);r.return(o)})),o.set((function(e,o){n.val=e;var u=t(e);r.changed(u,!0),i(u),o.return(u)})),o.reset((function(){var e=n.initValue;n.val=e;var o=t(e);r.changed(o,!0),i(o)}))},data:{},inputs:["get","set","reset"],outputs:["return","changed"]},{namespace:"mybricks.core-comlib.type-change",version:"1.0.0",runtime:e.Z,data:{},inputs:["from"],outputs:["to"]},{namespace:"mybricks.core-comlib.connector",version:"1.0.0",runtime:function(t){var e=t.env,r=t.data,o=t.inputs,i=t.outputs,u=t.onError;e.runtime&&(r.immediate?n({env:e,data:r,outputs:i}):o.call((function(t){n({env:e,data:r,outputs:i,onError:u},t)})))},data:{},inputs:["call"],outputs:["then","catch"]},{namespace:"mybricks.core-comlib.frame-input",version:"1.0.0",runtime:function(t){var e=t.env,n=t.inputs;e.runtime&&n.getCurValue((function(t,e){e.return(t)}))},data:{},inputs:["getCurValue"],outputs:["return"]},{namespace:"mybricks.core-comlib.scenes",version:"1.0.0",runtime:function(t){var e=t.env,n=t.data,r=t.inputs,o=(t._inputs,t._inputsCallable);r[n._pinId||"open"]((function(t){n._pinId&&"open"!==n._pinId?o[n._pinId](t):(e.canvas.open(n._sceneId,t,"popup"===n._sceneShowType?null:n.openType),o._open(t))}))},data:{_sceneId:null,_sceneShowType:null,openType:"blank"},inputs:["open"],outputs:[]},{namespace:"mybricks.core-comlib.module",version:"1.0.0",runtime:function(t){var e=t.id,n=t.env,o=t.data,i=t.style,u=t.inputs,a=t.outputs,c=(0,r.useState)(),s=c[0],p=c[1],l=(0,r.useMemo)((function(){var t=n.getModuleJSON(o.definedId);return n.renderModule(t,{ref:function(e){if(p(e),n.edit){var r=e.style;r&&(i.widthAuto=r.widthAuto,i.widthFull=r.widthFull,i.heightAuto=r.heightAuto,i.heightFull=r.heightFull)}if(n.runtime){var c=t.inputs,s=t.outputs,l=t.pinRels,f={},d={};Object.entries(l).forEach((function(t){var e=t[0],n=t[1],r=e.split("_rootFrame_-")[1];if(r){var o=n[0];f[r]=o,d[o]=!0}}));var _=o.configs;for(var v in _)e.inputs[v](_[v]);s.forEach((function(t){var n=t.id;d[n]||e.outputs(n,a[n])})),c.forEach((function(t){var n=t.id;u[n]((function(t,r){var o=f[n];o&&e.outputs(o,(function(t){r[o](t)})),e.inputs[n](t)}))}))}e.run()},disableAutoRun:!0,outputs:a,rootId:e})}),[]);return(0,r.useMemo)((function(){if(s&&n.edit){var t=o.configs;for(var e in t)s.inputs[e](t[e])}}),[o.configs,s]),l},data:{},inputs:["show","hide","showOrHide"],outputs:["click"]},{namespace:"mybricks.core-comlib.group",version:"1.0.0",runtime:function(t){var e=t.slots,n=t.outputs,o=(0,r.useCallback)((function(){n.click()}),[]),i=(0,r.useCallback)((function(){n.dblClick()}),[]);return React.createElement("div",{style:{width:"100%",height:"100%"},onClick:o,onDoubleClick:i},e.content.render())},data:{},inputs:["show","hide","showOrHide"],outputs:["click","dblClick"]},{namespace:"mybricks.core-comlib.service",version:"1.0.0",runtime:function(t){t.inputs,t.outputs},data:{},inputs:[],outputs:[]},{namespace:"mybricks.core-comlib.frame-output",version:"1.0.0",runtime:function(t){var e=t.env,n=(t.data,t.inputs);t.outputs,e.runtime&&n.output((function(t){}))},data:{},inputs:["output"],outputs:[]},{namespace:"mybricks.core-comlib.js-ai",version:"1.0.0",runtime:function(t){var e,n,r=t.env,o=t.data,i=t.inputs,u=t.outputs,a=t.logger,c=t.onError,s=o.fns,p=o.runImmediate,l={outputs:k(u)};try{p&&r.runtime&&(n=w(s,[l],{env:r})),i.input((function(t){try{n=w(s,[O(O({},l),{inputs:k(t)})],{env:r})}catch(t){null==c||c(t),console.error("js计算组件运行错误.",t),a.error("".concat(t))}})),"function"==typeof(null===(e=null==r?void 0:r.runtime)||void 0===e?void 0:e.onComplete)&&r.runtime.onComplete((function(){null==n||n.dispose()}))}catch(t){null==c||c(t),console.error("js计算组件运行错误.",t),a.error("".concat(t))}},data:{},inputs:["input"],outputs:["output0"]}]}}(),__webpack_exports__}()}));