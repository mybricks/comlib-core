!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.fn=t():e.fn=t()}(this,(function(){return function(){"use strict";var __webpack_modules__={356:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){function __WEBPACK_DEFAULT_EXPORT__(_a){var data=_a.data,outputs=_a.outputs,inputs=_a.inputs,onError=_a.onError;inputs.from((function(val,relOutpus){var _a,script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){var fn=void 0,returnVal=void 0,isOk=void 0;try{eval("fn = ".concat(script)),returnVal=fn(val),isOk=!0}catch(e){console.error(e),onError("数据转换错误:".concat(e.message),e)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__webpack_require__.d(__webpack_exports__,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}})}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};return function(){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return l},getCom:function(){return d}});var e=JSON.parse('{"title":"Fn计算","namespace":"mybricks.core-comlib.fn","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"Fn计算","icon":"./icon.png","runtime":"./Fn.tsx","rtType":"js","visibility":false}'),t=JSON.parse('{"visibility":false,"title":"变量","namespace":"mybricks.core-comlib.var","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"变量","icon":"./icon.png","data":"./data.json","runtime":"./Var.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"get","title":"读取","schema":{"type":"any"},"rels":["return"]},{"id":"set","title":"赋值","schema":{"type":"follow"},"rels":["return"]},{"id":"reset","title":"重置","schema":{"type":"any"}}],"outputs":[{"id":"return","title":"完成","schema":{"type":"unknown"}},{"id":"changed","title":"当值发生变化","schema":{"type":"unknown"}}]}');function n(e){if(e)try{var t=Object.prototype.toString.call(e);return["[object Object]","[object Array]"].includes(t)?JSON.parse(JSON.stringify(e)):e}catch(t){return e}return e}var r=JSON.parse('{"title":"类型转换","visibility":false,"namespace":"mybricks.core-comlib.type-change","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"类型转换","icon":"./icon.png","runtime":"./rt.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"from","title":"从","schema":{"type":"follow"},"rels":["to"]}],"outputs":[{"id":"to","title":"到","schema":{"type":"follow"},"conMax":1,"editable":true}]}'),i=__webpack_require__(356),o=JSON.parse('{"deprecated":true,"visibility":false,"title":"连接器","namespace":"mybricks.core-comlib.connector","author":"MyBricks","author_name":"MyBricks","version":"1.0.0","description":"连接器","runtime":"./runtime.ts","editors":"./editors.tsx","icon":"./icon.svg","rtType":"js-autorun","inputs":[{"id":"call","rels":["then","catch"],"title":"调用","schema":{"type":"object"}}],"outputs":[{"id":"then","title":"结果","schema":{"type":"unknown"}},{"id":"catch","title":"发生错误","schema":{"type":"string"}}]}');function a(e,t){var n=e.env,r=e.data,i=e.outputs;if(e.onError,void 0===t&&(t={}),r.connector)try{n.callConnector(r.connector,t,r.connectorConfig).then((function(e){i.then(e)})).catch((function(e){i.catch(e)}))}catch(e){console.error(e),i.catch("执行错误 ".concat(e.message||e))}else i.catch("没有选择接口")}var c=JSON.parse('{"visibility":false,"title":"作用域输入","namespace":"mybricks.core-comlib.frame-input","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"作用域输入","rtType":"js","runtime":"./runtime.ts","editors":"./editor.tsx","inputs":[{"id":"getCurValue","title":"获取","schema":{"type":"any"},"rels":["return"]}],"outputs":[{"id":"return","title":"结果","schema":{"type":"follow"}}]}'),u=JSON.parse('{"visibility":false,"title":"打开对话框","namespace":"mybricks.core-comlib.scenes","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"切换场景","icon":"./icon.png","runtime":"./runtime.ts","data":"./data.json","rtType":"js","inputs":[{"id":"open","title":"打开","schema":{"type":"any"}}]}'),s=JSON.parse('{"title":"模块","namespace":"mybricks.core-comlib.module","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"模块","icon":"./icon.png","data":"./data.json","runtime":"./runtime.tsx","editors":"./editors.ts","outputs":[{"id":"click","title":"单击","description":"点击模块触发的事件","schema":{"type":"any"}}]}'),p=JSON.parse('{"title":"服务Fx","namespace":"mybricks.core-comlib.service","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"服务Fx","icon":"./icon.png","runtime":"./Service.tsx","rtType":"js","visibility":false}'),_={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[f({comDef:e,rt:function(e){e.inputs,e.outputs}}),f({comDef:t,rt:function(e){e.env;var t=e.data,r=e.outputs,i=e.inputs,o=e._notifyBindings;i.get((function(e,r){var i=n(void 0!==t.val?t.val:t.initValue);r.return(i)})),i.set((function(e,i){t.val=e;var a=n(e);r.changed(a,!0),o(a),i.return(a)})),i.reset((function(){var e=t.initValue;t.val=e;var i=n(e);r.changed(i,!0),o(i)}))}}),f({comDef:r,rt:i.Z}),f({comDef:o,rt:function(e){var t=e.env,n=e.data,r=e.inputs,i=e.outputs,o=e.onError;t.runtime&&(n.immediate?a({env:t,data:n,outputs:i}):r.call((function(e){a({env:t,data:n,outputs:i,onError:o},e)})))}}),f({comDef:c,rt:function(e){var t=e.env,n=e.inputs;t.runtime&&n.getCurValue((function(e,t){t.return(e)}))}}),f({comDef:u,rt:function(e){var t=e.env,n=e.data,r=e.inputs,i=(e._inputs,e._inputsCallable);r.open((function(e){t.canvas.open(n._sceneId,e,"popup"===n._sceneShowType?null:n.openType),i._open(e)}))}}),f({comDef:s,rt:function(e){var t=e.id,n=e.env,r=e.data,i=e.inputs,o=e.outputs,a=n.getModuleJSON(r.definedId);return n.renderModule(a,{ref:function(e){var t=a.inputs,n=a.outputs,c=a.pinRels,u={},s={};Object.entries(c).forEach((function(e){var t=e[0],n=e[1],r=t.split("_rootFrame_-")[1];if(r){var i=n[0];u[r]=i,s[i]=!0}}));var p=r.configs;for(var _ in p)e.inputs[_](p[_]);n.forEach((function(t){var n=t.id;s[n]||e.outputs(n,o[n])})),t.forEach((function(t){var n=t.id;i[n]((function(t,r){var i=u[n];i&&e.outputs(i,(function(e){r[i](e)})),e.inputs[n](t)}))})),e.run()},disableAutoRun:!0,outputs:o,rootId:t})}}),f({comDef:p,rt:function(e){e.inputs,e.outputs}})]},l=_;function d(e){return _.comAray.find((function(t){return t.namespace===e}))}function f(e){var t=e.comDef,n=e.rt,r=e.data;return Object.assign(t,{runtime:n,data:r})}}(),__webpack_exports__}()}));